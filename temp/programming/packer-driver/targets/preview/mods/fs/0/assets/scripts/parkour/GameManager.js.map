{"version":3,"sources":["file:///C:/Users/86152/Desktop/EulerLand/assets/scripts/parkour/GameManager.ts"],"names":["_decorator","Component","Node","NodePool","Prefab","instantiate","CCInteger","math","randomRangeInt","Camera","Label","Animation","PlayerControl","AudioManager","ccclass","property","GameManager","type","SetBarPool","k","_barPools","i","temp","push","t","j","barPerfabs","put","_barPoolss","SetItemPool","_itemPools","itemPerfabs","length","coinPoolRestore","item","HWPoolRestore","RBPoolRestore","CNPoolRestore","VMPoolRestore","Cll","endPanel","active","Restart","clear","pos","player","position","clone","z","y","bg","setPosition","playerCurentZ","playerLastZ","coinCount","isPause","isStart","isContinue","GameStart","GS","playSound","downCount","playerControl","OnStart","b","get","parent","coinRoot","Vec3","coin","startPanel","content","DownCount","scheduleOnce","time","console","log","children","Down0","anim","getComponent","play","GetInfo","infoPanel","CloseInfo","GameOver","isSucceed","score1","string","Math","floor","score","toString","endS","QAPanel","endF","KeepGo","animator","resume","pauseClick","pause","pausePanel","continueClick","start","update","deltaTime","camera","node","phase","runSpeed","childCoinLenth","tempZ","killCoinNumber","name"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, AudioSource,Node,assert,game, NodePool, Prefab, instantiate, CCInteger, math, randomRangeInt, RichText, director, Camera, Vec3, Label, resources, Animation } from 'cc';\r\nimport { DEBUG } from 'cc/env';\r\nimport { PlayerControl } from './PlayerControl';\r\nimport { AudioManager } from './AudioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameManager')\r\nexport class GameManager extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    ////////////////////////21212121212\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n    @property({\r\n        type: PlayerControl\r\n    })\r\n    playerControl: PlayerControl = null!;\r\n    @property(\r\n        { type: Prefab }\r\n    )\r\n    coinPerfab: Prefab = null!;\r\n    @property(\r\n        { type: CCInteger }\r\n    )\r\n    coinPoolNumber = 20;\r\n    \r\n    @property(\r\n        { type: Prefab }\r\n    )\r\n    barPerfab: Prefab = null!;\r\n\r\n    @property(\r\n        [Prefab]\r\n    )\r\n    barPerfabs: Prefab[] = [];\r\n    @property(\r\n        [Prefab]\r\n    )\r\n    itemPerfabs: Prefab[] = [];\r\n\r\n    @property(\r\n        { type: CCInteger }\r\n    )\r\n    barPoolNumber = 5;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    player: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    coinRoot: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    barRoot: Node = null!;\r\n\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    pausePanel: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    pause: Node = null!;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    endPanel: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    endS: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    endF: Node = null!;\r\n\r\n    @property({\r\n        type: Node\r\n    })\r\n    QAPanel: Node = null!;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    bg: Node = null!;\r\n    @property(\r\n        { type: Camera }\r\n    )\r\n    camera: Camera = null!;\r\n    @property({\r\n        type: Label\r\n    })\r\n    score1: Label = null!;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    downCount: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    infoPanel: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    infoBtn: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    content: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    startPanel: Node = null!;\r\n\r\n    playerCurentZ = 0;\r\n    playerLastZ = 0;\r\n    coinCount = 0;\r\n    t1 = 0;\r\n    t2 = 0;\r\n    t3 = 300;\r\n    private _coinPool: NodePool = new NodePool();\r\n    private _barPool: NodePool = new NodePool();\r\n    private _barPools: NodePool[] = [];\r\n    private _itemPools: NodePool[] = [];\r\n    private _barPoolss: NodePool[][] = [];\r\n    private _itemPoolss= [];\r\n\r\n    isPause: boolean = false;\r\n    isStart: boolean = false;\r\n    isContinue: boolean = false;\r\n    public SetBarPool() {\r\n        for (let k = 0; k < 3; k++) {\r\n            let _barPools: NodePool[] = [];\r\n            for (let i = 0; i < 5; i++) {\r\n                let temp: NodePool = new NodePool();\r\n                _barPools.push(temp);\r\n            }\r\n            let t = 0;\r\n            for (let i = k * 5; i < k * 5 + 5; i++) {\r\n                for (let j = 0; j < 5; j++) {\r\n                    let temp = instantiate(this.barPerfabs[i]);\r\n                    _barPools[t].put(temp);\r\n                }\r\n                t++;\r\n            }\r\n            this._barPoolss.push(_barPools);\r\n        }\r\n    }\r\n    public SetItemPool() {\r\n        for (let i = 0; i < 5; i++) {\r\n            let temp: NodePool = new NodePool();\r\n            this._itemPools.push(temp);\r\n        }\r\n        for (let i = 0; i < this.itemPerfabs.length; i++) {\r\n            if (i < 1) {\r\n                for (let j = 0; j < 20; j++) {\r\n                    let temp = instantiate(this.itemPerfabs[i]);\r\n                    this._itemPools[0].put(temp);\r\n                }\r\n            }\r\n            else {\r\n                for (let j = 0; j < 5; j++) {\r\n                    let temp = instantiate(this.itemPerfabs[i]);\r\n                    this._itemPools[i].put(temp);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public coinPoolRestore(item: Node)\r\n    {\r\n        this._itemPools[0].put(item);\r\n    }\r\n    /*public ItemPoolRestore(item: Node) {\r\n        if (item.name == \"HardWare\")\r\n            this._itemPools[1].put(item);\r\n        else if (item.name == \"RaspBarry\")\r\n            this._itemPools[2].put(item);\r\n        else if (item.name == \"CloudNative\")\r\n            this._itemPools[3].put(item);\r\n        else if (item.name == \"VM\")\r\n            this._itemPools[4].put(item);\r\n        else if (item.name == \"Coin\")\r\n            this._itemPools[0].put(item);\r\n    }8*/\r\n    public HWPoolRestore(item: Node) {\r\n        this._itemPools[1].put(item);\r\n    }\r\n    public RBPoolRestore(item: Node) {\r\n        this._itemPools[2].put(item);\r\n    }\r\n    public CNPoolRestore(item: Node) {\r\n        this._itemPools[3].put(item);\r\n    }\r\n    public VMPoolRestore(item: Node) {\r\n        this._itemPools[4].put(item);\r\n    }\r\n    public Cll() {\r\n        this.endPanel.active = false;\r\n    }\r\n    public Restart() {\r\n        for (let i = 0; i < this._itemPools.length; i++)\r\n            this._itemPools[i].clear();\r\n        let pos = this.player.position.clone();\r\n        pos.z += 0;\r\n        pos.y += 2;\r\n        this.bg.setPosition(pos);\r\n        this.endPanel.active = false;\r\n        this.playerCurentZ = 0;\r\n        this.playerLastZ = 0;\r\n        this.coinCount = 0;\r\n        this.isPause = false;\r\n        this. isStart = false;\r\n        this.isContinue= false;\r\n        this.SetItemPool();\r\n       // this.SetBarPool();\r\n        this.GameStart();\r\n    }\r\n    public GS() {\r\n        AudioManager.playSound(\"go\")        \r\n        this.downCount.active = false;\r\n        this.isStart = true;\r\n        this.playerControl.OnStart();\r\n        for (let i = 0; i < 10; ++i) {\r\n            if (this.coinCount > 30) {\r\n                this.coinCount = 0;\r\n                let b = randomRangeInt(1, 5);\r\n                let item = this._itemPools[b].get();\r\n                if (item != null) {\r\n                    this.coinCount = 0;\r\n                    item.parent = this.coinRoot;\r\n                    item.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 2.2, 5 * i+150));\r\n                }\r\n            }\r\n            else {\r\n                let coin = this._itemPools[0].get();\r\n                if (coin != null) {\r\n                    this.coinCount++;\r\n                    coin.parent = this.coinRoot;\r\n                    coin.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.7, 5 * i+150));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public GameStart() {\r\n        this.startPanel.active = false;\r\n        this.content.active = true;\r\n        this.DownCount(3);\r\n        this.scheduleOnce(this.GS, 3);\r\n    }\r\n    public DownCount(time: number) {\r\n        console.log(\"time\");\r\n        this.downCount.active = true;\r\n        this.downCount.children[0].active = false;\r\n        this.downCount.children[1].active = false;\r\n        this.scheduleOnce(this.Down0, time - 3);\r\n    }\r\n    public Down0() {\r\n        AudioManager.playSound(\"321\");\r\n        let anim = this.downCount.children[1].getComponent(Animation);\r\n        this.downCount.children[0].active = true;\r\n        this.downCount.children[1].active = true;\r\n        anim!.play();\r\n    }\r\n    public GetInfo() {\r\n        AudioManager.playSound(\"clickbtn\")\r\n        this.infoPanel.active = true;\r\n    }\r\n    public CloseInfo() {\r\n        AudioManager.playSound(\"clickbtn\")\r\n        this.infoPanel.active = false;\r\n    }\r\n    \r\n    public GameOver(isSucceed: boolean) {\r\n        this.score1.string = Math.floor(this.playerControl.score * 10 + this.player.position.z * 15).toString();\r\n        if (isSucceed) {\r\n            AudioManager.playSound(\"win\")\r\n            this.isPause = true;\r\n            this.endPanel.active = true;\r\n            this.endS.active = true;\r\n        }\r\n        else {\r\n            AudioManager.playSound(\"fail\")\r\n            this.QAPanel.active = false;\r\n            this.endPanel.active = true;\r\n            this.endF.active = true;\r\n        }\r\n    }\r\n    public KeepGo() {\r\n        //this.QAPanel.active = false;\r\n        this.downCount.active = false;\r\n        this.playerControl.animator.resume();\r\n        this.isPause = false;\r\n        AudioManager.playSound(\"go\")\r\n        console.log(\"go\");\r\n    }\r\n    public pauseClick()\r\n    {\r\n        // director.pause();\r\n        AudioManager.playSound(\"clickbtn\")\r\n        this.isPause = true;\r\n        this.playerControl.animator.pause();\r\n        this.pausePanel.active = true;\r\n        this.pause.active = false;\r\n    }\r\n        \r\n    public continueClick()\r\n    {\r\n        AudioManager.playSound(\"clickbtn\")\r\n        this.DownCount(3);\r\n        this.pausePanel.active = false;\r\n        this.pause.active = true;\r\n        this.scheduleOnce(this.KeepGo, 3);\r\n\r\n    }\r\n    start()\r\n    {\r\n       /*  for (let i = 0; i < this.coinPoolNumber; ++i)\r\n        {\r\n            let coin = instantiate(this.coinPerfab);\r\n            this._coinPool.put(coin);\r\n        }\r\n        for (let i = 0; i < this.barPoolNumber; ++i)\r\n        {\r\n            let bar = instantiate(this.barPerfab);\r\n            this._barPool.put(bar);\r\n        } */\r\n        this.SetItemPool();\r\n        this.endPanel.active = false;\r\n        // AudioManager.playMusic(\"background\");\r\n       // this.SetBarPool();\r\n        /*for (let i = 0; i < this.HWPoolNumber; ++i) {\r\n            let hardWare = instantiate(this.hardWarePrefab);\r\n            this._HWPool.put(hardWare);\r\n        }\r\n        for (let i = 0; i < this.RBPoolNumber; ++i) {\r\n            let raspBarry = instantiate(this.raspBerryPrefab);\r\n            this._RBPool.put(raspBarry);\r\n        }\r\n        for (let i = 0; i < this.CNPoolNumber; ++i) {\r\n            let cloudNative = instantiate(this.cloudNativePrefab);\r\n            this._CNPool.put(cloudNative);\r\n        }\r\n        for (let i = 0; i < this.VMPoolNumber; ++i) {\r\n            let VM = instantiate(this.vmWarePrefab);\r\n            this._VMPool.put(VM);\r\n        }\r\n       /* for (let i = 0; i < this.coinPoolNumber - 5; ++i)\r\n        {\r\n            let coin = this._coinPool.get();\r\n            if (coin != null)\r\n            {\r\n                coin.parent = this.coinRoot;\r\n                coin.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.7, 5 * i));\r\n            }\r\n        }\r\n        for (let i = 0; i < this.barPoolNumber - 2; ++i)\r\n        {\r\n            let bar = this._barPool.get();\r\n            if (bar != null)\r\n            {\r\n                bar.parent = this.barRoot;\r\n                bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.7, 10 * i + 7.5));\r\n            }\r\n        }*/\r\n    }\r\n\r\n    update(deltaTime: number)\r\n    {\r\n        if (!this.isPause && this.isStart) {//this.bg.setPosition(new math.Vec3(this.bg.position.x, this.bg.position.y, this.player.position.z + 300));\r\n            //if (this.t1 > 0) this.t1 -= deltaTime;\r\n            //if (this.t2 > 0) this.t2 -= deltaTime;\r\n            let pos = this.camera.node.position.clone();\r\n            pos.z += 300;\r\n            pos.y -=3;\r\n            this.bg.setPosition(pos);\r\n            if (this.playerControl.phase == 3) {\r\n                if (this.playerControl.runSpeed <= 0)\r\n                    this.GameOver(true);\r\n            }\r\n            this.playerCurentZ += this.player.position.z - this.playerLastZ;\r\n            this.playerLastZ = this.player.position.z;\r\n            \r\n            if (this.playerCurentZ > 60) {\r\n                this.playerCurentZ -= 60;\r\n                let childCoinLenth = this.coinRoot.children.length;\r\n                let tempZ = this.player.position.z;\r\n                if (this.playerControl.phase != 3 && this.player.position.z < 5050) {\r\n                // if (this.playerControl.phase != 3 && this.player.position.z < 7000) {\r\n                    let killCoinNumber = 0;\r\n                    for (let i = childCoinLenth - 1; i >= 0; --i) {\r\n                        //console.log(\"1.\" + this.coinRoot.children[i].position.z);\r\n                        //console.log(\"2.\" + tempZ);\r\n                        if (this.coinRoot.children[i].position.z < tempZ - 5) {\r\n                            if (this.coinRoot.children[i].name == \"HardWare\")\r\n                                this._itemPools[1].put(this.coinRoot.children[i]);\r\n                            else if (this.coinRoot.children[i].name == \"RaspBarry\")\r\n                                this._itemPools[2].put(this.coinRoot.children[i]);\r\n                            else if (this.coinRoot.children[i].name == \"CloudNative\")\r\n                                this._itemPools[3].put(this.coinRoot.children[i]);\r\n                            else if (this.coinRoot.children[i].name == \"VM\")\r\n                                this._itemPools[4].put(this.coinRoot.children[i]);\r\n                            else if (this.coinRoot.children[i].name == \"Coin\")\r\n                                this._itemPools[0].put(this.coinRoot.children[i]);\r\n                            killCoinNumber++;\r\n                        }\r\n                    }\r\n                    //console.log(killCoinNumber + \"?\");\r\n                    killCoinNumber = killCoinNumber < 6 ? 6 : killCoinNumber;\r\n                    for (let i = 0; i < 6; ++i) {\r\n                        if (this.coinCount > 30) {\r\n                            let b = randomRangeInt(1, 5);\r\n                            let item = this._itemPools[b].get();\r\n                            if (item != null) {\r\n                                this.coinCount = 0\r\n                                item.parent = this.coinRoot;\r\n                                item.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 2.2, 200 + tempZ + 5 * i));\r\n                            }\r\n                        }\r\n                        else {\r\n                            let coin = this._itemPools[0].get();\r\n                            if (coin != null) {\r\n                                this.coinCount++;\r\n                                coin.parent = this.coinRoot;\r\n                                coin.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.7, 200 + tempZ + 5 * i));\r\n                                console.log(\"setCoin\");\r\n                            }\r\n                        }\r\n                    }\r\n                    /*if (this.t1 <= 0 && this.t2 <= 0) {\r\n                        this.t2 = 4;\r\n                        let childBarLenth = this.barRoot.children.length;\r\n                        let killBarNumber = 0;\r\n                        for (let i = childBarLenth - 1; i >= 0; --i) {\r\n                            if (this.barRoot.children[i].position.z < tempZ - 4) {\r\n                                let str = this.barRoot.children[i].name.split(\"0\");\r\n                                let a1 = Number(str[0]);\r\n                                let a2 = Number(str[1]);\r\n                                console.log(this.barRoot.children[i].name);\r\n                                console.log(a1 + \"|||\" + a2);\r\n                                this._barPoolss[a1 - 1][a2].put(this.barRoot.children[i]);\r\n                                killBarNumber++;\r\n                            }\r\n                        }\r\n                        for (let i = 0; i < 1; ++i) {\r\n                            let a = randomRangeInt(0, 5);\r\n                            let bar = this._barPoolss[this.playerControl.phase][a].get();\r\n                            if (bar != null) {\r\n                                bar.parent = this.barRoot;\r\n                                if (bar.name == \"202\" || bar.name == \"201\" || bar.name == \"102\" || bar.name == \"103\" || bar.name == \"104\"\r\n                                ) {\r\n                                    bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 2, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                                else if (bar.name == \"100\" || bar.name == \"101\" || bar.name == \"301\" || bar.name == \"204\") {\r\n                                    bar.setPosition(new math.Vec3(0, 1.5, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                                else if (bar.name == \"203\") {\r\n                                    bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.2, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                                else if (bar.name == \"200\") {\r\n                                    bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 1, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                                else if (bar.name == \"300\") {\r\n                                    bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 1.3, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                                else {\r\n                                    bar.setPosition(new math.Vec3(randomRangeInt(-1, 2) * 1.5, 0.7, 60 + tempZ + 10 * i + 2.5));\r\n                                }\r\n                            }\r\n                        }\r\n                    }*/\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}