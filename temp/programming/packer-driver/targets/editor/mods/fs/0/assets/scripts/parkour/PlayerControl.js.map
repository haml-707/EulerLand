{"version":3,"sources":["file:///C:/eulerland%20game/EulerLand/assets/scripts/parkour/PlayerControl.ts"],"names":["CCFloat","Collider","Enum","RigidBody","BoxCollider","Vec3","Label","math","_decorator","Component","Node","SkeletalAnimation","systemEvent","SystemEventType","Animation","GameManager","ItemS","QA","AudioManager","ccclass","property","PlayerControl","type","Normal","Hardware","Raspberry","Cloud","Virtual","onLoad","playerStatus","status","on","TOUCH_START","onTouchStartEvent","TOUCH_END","onTouchEndEvent","Restart","scoreText","string","bg1","active","bg2","bg3","node","position","animator","stop","men","anim","getComponent","isInvisibleH","isInvisibleR","isAccelerate","isAbsorb","phase","t1","t2","t3","t4","touchX","touchY","curentX","targetX","jump","slip","turn","curentZ","score","OnStart","play","rigidBody","collider","onTriggerEnter","onDestroy","off","touch","event","getLocation","x","y","gameManager","isPause","isStart","endX","endY","difX","difY","console","log","playSound","Math","abs","setTimeout","jumpTime","applyForce","size","center","max","fadeTime","min","instance","otherCollider","name","isCoin","coinPoolRestore","toString","isBar","qa","SetQA","QAPanel","children","runSpeed","speeds","effects","pause","isHW","HWPoolRestore","isRB","RBPoolRestore","isCN","CNPoolRestore","isVM","VMPoolRestore","Setting","setEndPanelHide","endPanel","update","deltaTime","z","barRoot","i","length","coins","pos","clone","lerp","setPosition"],"mappings":"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","sourcesContent":["\r\nimport { absMax, CCFloat, Collider, director, Enum, Event, find, ITriggerEvent, RichText, RigidBody, Script, tween, Scheduler, animation, BoxCollider, Vec3, physics, Label } from 'cc';\r\nimport { EventTouch, Touch, math } from 'cc';\r\nimport { _decorator, Component, Node, SkeletalAnimation, CCLoader, systemEvent, SystemEventType, Animation } from 'cc';\r\nimport { GameManager } from './GameManager';\r\nimport { ItemS } from './ItemS';\r\nimport { QA } from './Q&A';\r\nimport { AudioManager } from './AudioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PlayerControl')\r\nexport class PlayerControl extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n    @property({\r\n        type: CCFloat,\r\n    })\r\n    fadeTime = 0.3;\r\n    @property({\r\n        type: CCFloat,\r\n    })\r\n    jumpTime = 0.3;\r\n    @property({\r\n        type: CCFloat,\r\n    })\r\n    runSpeed = 10;\r\n    @property({\r\n        type: SkeletalAnimation,\r\n    })\r\n    public animator: SkeletalAnimation = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    men: Node[] = [];\r\n\r\n    @property({\r\n        type: GameManager\r\n    })\r\n    gameManager: GameManager = null!;\r\n    @property(\r\n        { type: Label }\r\n    )\r\n    scoreText: Label = null!;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    endPanel: Node = null!;\r\n\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    effects: Node[] = [];\r\n    @property(\r\n        { type: QA }\r\n    )\r\n    qa: QA = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    QAPanel: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    coins: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    bg1: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    bg2: Node = null!;\r\n    @property(\r\n        { type: Node }\r\n    )\r\n    bg3: Node = null!;\r\n\r\n    rigidBody: RigidBody = null!;\r\n    isHitBar: boolean = false;\r\n    public isInvisibleH: boolean = false;\r\n    isInvisibleR: boolean = false;\r\n    isAccelerate: boolean = false;\r\n    isAbsorb: boolean = false;\r\n\r\n    public t1 = 0;\r\n    t2 = 0;\r\n    t3 = 0;\r\n    t4 = 0;\r\n    public phase = 0;\r\n    speeds: number[] = [20, 25, 30];\r\n    \r\n    touchX = 0;\r\n    touchY = 0;\r\n    curentX = 0;\r\n    targetX = 0;\r\n    jump = false;\r\n    slip = false;\r\n    turn = false;\r\n    curentZ = 0;\r\n    public score = 0;\r\n    playerStatus = 0;\r\n    status = Enum({\r\n        Normal: 0,\r\n        Hardware: 1,\r\n        Raspberry: 2,\r\n        Cloud: 3,\r\n        Virtual: 4,\r\n    });\r\n    onLoad()\r\n    {\r\n        this.playerStatus = this.status.Normal;\r\n        systemEvent.on(SystemEventType.TOUCH_START, this.onTouchStartEvent, this);\r\n        systemEvent.on(SystemEventType.TOUCH_END, this.onTouchEndEvent, this);\r\n    }\r\n    public Restart() {\r\n        this.scoreText.string = \"0\";\r\n        this.bg1.active = true;\r\n        this.bg2.active = false;\r\n        this.bg3.active = false;\r\n        this.node.position = new Vec3(0, 0, 0);\r\n        this.animator.stop();\r\n        this.men[1].active = false;\r\n        this.men[0].active = true;\r\n        this.men[2].active = false;\r\n        this.men[3].active = false;\r\n        this.men[4].active = false;\r\n        let anim = this.men[0].getComponent(SkeletalAnimation);\r\n        anim?.stop();\r\n        this.isInvisibleH = false;\r\n        this.isInvisibleR = false;\r\n        this.isAccelerate = false;\r\n        this.isAbsorb = false;\r\n        this.phase = 0;\r\n        this.t1 = 0;\r\n        this.t2 = 0;\r\n        this.t3 = 0;\r\n        this.t4 = 0;\r\n        this.touchX = 0;\r\n        this. touchY = 0;\r\n        this. curentX = 0;\r\n        this.targetX = 0;\r\n        this.jump = false;\r\n        this. slip = false;\r\n        this.turn = false;\r\n        this.curentZ = 0;\r\n        this.score = 0;\r\n    }\r\n    public OnStart()\r\n    {\r\n        let anim = this.men[0].getComponent(SkeletalAnimation);\r\n        anim?.play();\r\n       // this.animator.play(\"run\");\r\n        this.rigidBody = this.node.getComponent(RigidBody)!;\r\n        let collider = this.node.getComponent(Collider)!;\r\n        collider.on(\"onTriggerEnter\", this.onTriggerEnter, this);\r\n        // [3]\r\n    }\r\n    onDestroy()\r\n    {\r\n        systemEvent.off(SystemEventType.TOUCH_START, this.onTouchStartEvent, this);\r\n        systemEvent.off(SystemEventType.TOUCH_END, this.onTouchEndEvent, this);\r\n    }\r\n    onTouchStartEvent(touch: Touch, event: EventTouch)\r\n    {\r\n        if (this.jump || this.turn)\r\n            return;\r\n        this.touchX = touch.getLocation().x;\r\n        this.touchY = touch.getLocation().y;\r\n    }\r\n    onTouchEndEvent(touch: Touch, event: EventTouch)\r\n    {\r\n        if (!this.gameManager.isPause && this.gameManager.isStart ) {\r\n            if (this.jump || this.turn)\r\n                return;\r\n            let endX = touch.getLocation().x;\r\n            let endY = touch.getLocation().y;\r\n            let difX = this.touchX - endX;\r\n            let difY = this.touchY - endY;\r\n\r\n            //上下起跳\r\n            console.log(difY);\r\n            AudioManager.playSound(\"active\")\r\n            if (Math.abs(difY) > Math.abs(difX) && difY < -30 && !this.jump) {\r\n                difX = 0;\r\n                this.jump = true;\r\n                this.men[1].active = true;\r\n                this.men[0].active = false;\r\n                this.men[2].active = false;\r\n                this.men[3].active = false;\r\n                this.men[4].active = false;\r\n                let anim = this.men[1].getComponent(SkeletalAnimation);\r\n                anim?.play();\r\n                setTimeout(() => {\r\n                    this.jump = false;\r\n                    this.men[0].active = true;\r\n                    this.men[1].active = false;\r\n                    let anim = this.men[0].getComponent(SkeletalAnimation);\r\n                    anim?.play();\r\n                }, this.jumpTime * 1900);\r\n                this.rigidBody.applyForce(new math.Vec3(0, 23000, 0));\r\n                console.log(\"jump\");\r\n                return;\r\n            }\r\n            else if (Math.abs(difY) > Math.abs(difX) && difY > 30) {\r\n                difX = 0;\r\n                this.slip = true;\r\n                this.men[2].active = true;\r\n                this.men[0].active = false;\r\n                let anim = this.men[2].getComponent(SkeletalAnimation);\r\n                anim?.play();\r\n                this.node.getComponent(BoxCollider)!.size = new Vec3(0.5,0.5,0.5);\r\n                this.node.getComponent(BoxCollider)!.center = new Vec3(0, 0.3, 0.1);\r\n                setTimeout(() => {\r\n                    this.slip = false;\r\n                    this.node.getComponent(BoxCollider)!.size = new Vec3(0.5,1.5,0.5);\r\n                    this.node.getComponent(BoxCollider)!.center = new Vec3(0, 0.8, 0.1);\r\n                    this.men[0].active = true;\r\n                    this.men[2].active = false;\r\n                    let anim = this.men[0].getComponent(SkeletalAnimation);\r\n                    anim?.play();\r\n                }, this.jumpTime * 2300);\r\n                console.log(\"slip\");\r\n                return;\r\n            }\r\n            //左右转向\r\n            if (difX < -30) {\r\n                this.targetX = Math.max(this.curentX - 1.5, -1.5);\r\n                this.men[3].active = true;\r\n                this.men[0].active = false;\r\n                let anim = this.men[3].getComponent(SkeletalAnimation);\r\n                anim?.play();\r\n                setTimeout(() => {\r\n                    this.men[0].active = true;\r\n                    this.men[3].active = false;\r\n                    let anim = this.men[3].getComponent(SkeletalAnimation);\r\n                    anim?.play();\r\n                }, this.fadeTime * 800);\r\n            }\r\n            else if (difX > 30) {\r\n                this.targetX = Math.min(this.curentX + 1.5, 1.5);\r\n                this.men[4].active = true;\r\n                this.men[0].active = false;\r\n                let anim = this.men[4].getComponent(SkeletalAnimation);\r\n                anim?.play();\r\n                setTimeout(() => {\r\n                    this.men[0].active = true;\r\n                    this.men[4].active = false;\r\n                    let anim = this.men[4].getComponent(SkeletalAnimation);\r\n                    anim?.play();\r\n                }, this.fadeTime * 800);\r\n            }\r\n            if (this.targetX != this.curentX) {\r\n                this.turn = true;\r\n                setTimeout(() => {\r\n                    this.curentX = this.targetX;\r\n                    this.turn = false;\r\n                }, this.fadeTime * 1200);\r\n            }\r\n        }\r\n    }\r\n    onTriggerEnter(event: ITriggerEvent)\r\n    {\r\n        console.log(event.type, event);\r\n        let instance = event.otherCollider.node;\r\n        console.log(instance.name)\r\n        if (instance.getComponent(ItemS)?.isCoin) {\r\n            AudioManager.playSound(\"gold\")\r\n            this.gameManager.coinPoolRestore(instance);\r\n            this.score++;\r\n            this.scoreText.string = this.score.toString();\r\n            return;\r\n        }\r\n        else if (instance.getComponent(ItemS)?.isBar && this.isInvisibleH == false && !this.gameManager.isPause) {\r\n            if (this.isInvisibleR == false) {\r\n                this.qa.SetQA();\r\n                let anim = this.QAPanel.children[1].getComponent(Animation)!;\r\n                this.QAPanel.active = true;\r\n                anim.play();\r\n                this.isAccelerate = false;\r\n                this.runSpeed = this.speeds[this.phase];\r\n                this.isAbsorb = false;\r\n                this.effects[2].active = false;\r\n                //director.pause();\r\n                this.gameManager.isPause = true;\r\n                //this.animator.crossFade(\"run\");\r\n                this.animator.pause();\r\n            }\r\n            else {\r\n                this.isInvisibleR = false;\r\n                this.effects[1].active = false;\r\n            }\r\n        }\r\n        else if (instance.getComponent(ItemS)?.isHW) {\r\n            AudioManager.playSound(\"magic\")\r\n\r\n            this.isInvisibleH = true;\r\n            this.t1 = 10;\r\n            this.effects[0].active = true;\r\n            this.gameManager.HWPoolRestore(instance);\r\n        }\r\n        else if (instance.getComponent(ItemS)?.isRB) {\r\n            AudioManager.playSound(\"magic\")\r\n            this.isInvisibleR = true;\r\n            this.t2 = 10;\r\n            this.effects[1].active = true;\r\n            this.gameManager.RBPoolRestore(instance);\r\n        }\r\n        else if (instance.getComponent(ItemS)?.isCN) {\r\n            AudioManager.playSound(\"magic\")\r\n\r\n            this.isAccelerate = true;\r\n            this.t3 = 10;\r\n            this.gameManager.CNPoolRestore(instance);\r\n        }\r\n        else if (instance.getComponent(ItemS)?.isVM) {\r\n            AudioManager.playSound(\"magic\")\r\n\r\n            this.isAbsorb = true;\r\n            this.t4 = 10;\r\n            this.effects[2].active = true;\r\n            this.gameManager.VMPoolRestore(instance);\r\n        }\r\n    }\r\n    public Setting() {\r\n        this.isInvisibleH\r\n    }\r\n    public setEndPanelHide()\r\n    {\r\n        this.endPanel.active = false;\r\n    }\r\n    update(deltaTime: number)\r\n    {\r\n        console.log(this.node.position.z);\r\n        if (this.phase != 3) {\r\n            this.runSpeed = 35\r\n            // if (this.node.position.z < 6800) this.runSpeed = 20 + this.node.position.z * 5 / 3400;\r\n            // else this.runSpeed = 30;\r\n        }\r\n        if (this.node.position.z > 2400 && this.phase == 0) {\r\n            this.phase = 1;\r\n        }\r\n        if (this.node.position.z > 2695 && this.phase == 1) {\r\n            this.bg1.active = false;\r\n            this.bg2.active = true;\r\n        }\r\n        if (this.node.position.z > 3800 && this.phase == 1) {\r\n            this.phase = 2;\r\n        }\r\n        if (this.node.position.z > 4150 && this.phase == 2) {\r\n            this.bg2.active = false;\r\n            this.bg3.active = true;\r\n        }\r\n        if (this.node.position.z > 5100 && this.phase == 2) {\r\n            this.phase = 3;\r\n            console.log(this.gameManager.barRoot.children);\r\n            \r\n            for (let i = 0; i < this.gameManager.barRoot.children.length; i++)\r\n                this.gameManager.barRoot.children[i].active = false;\r\n        }\r\n        \r\n        if (this.phase == 3) {\r\n            this.runSpeed -= this.speeds[2]/5 * deltaTime;\r\n        }\r\n        // if (this.node.position.z > 3400 && this.phase == 0) {\r\n        //     this.phase = 1;\r\n        // }\r\n        // if (this.node.position.z > 3695 && this.phase == 1) {\r\n        //     this.bg1.active = false;\r\n        //     this.bg2.active = true;\r\n        // }\r\n        // if (this.node.position.z > 4500 && this.phase == 1) {\r\n        //     this.phase = 2;\r\n        // }\r\n        // if (this.node.position.z > 4900 && this.phase == 2) {\r\n        //     this.bg2.active = false;\r\n        //     this.bg3.active = true;\r\n        // }\r\n        // if (this.node.position.z > 7000 && this.phase == 2) {\r\n        //     this.phase = 3;\r\n        //     for (let i = 0; i < this.gameManager.barRoot.children.length; i++)\r\n        //         this.gameManager.barRoot.children[i].active = false;\r\n        // }\r\n        // if (this.phase == 3) {\r\n        //     this.runSpeed -= this.speeds[2]/5 * deltaTime;\r\n        // }\r\n        if (this.runSpeed <= 0)\r\n            this.animator.stop();\r\n        if (!this.gameManager.isPause && this.gameManager.isStart) {\r\n            if (this.isInvisibleH) {\r\n                this.t1 -= deltaTime;\r\n                if (this.t1 <= 0) {\r\n                    this.isInvisibleH = false;\r\n                    this.effects[0].active = false;\r\n                }\r\n            }\r\n            if (this.isInvisibleR) {\r\n                this.t2 -= deltaTime;\r\n                if (this.t2 <= 0) {\r\n                    this.isInvisibleR = false;\r\n                    this.effects[1].active = false;\r\n                }\r\n            }\r\n            if (this.isAccelerate) {\r\n                this.runSpeed = this.speeds[this.phase]+10;\r\n                this.t3 -= deltaTime;\r\n                if (this.t3 <= 0) {\r\n                    this.isAccelerate = false;\r\n                    this.runSpeed = this.speeds[this.phase];\r\n                }\r\n            }\r\n            if (this.isAbsorb) {\r\n                this.t4 -= deltaTime;\r\n                if (this.t4 <= 0) {\r\n                    this.isAbsorb = false;\r\n                    this.effects[2].active = false;\r\n                }\r\n                for (let i = 0; i < this.coins.children.length; i++) {\r\n                    if (this.coins.children[i].position.z < this.node.position.z + 10) {\r\n                        if (this.coins.children[i].getComponent(ItemS)?.isCoin) {\r\n                           // this.gameManager.coinPoolRestore(this.coins.children[i]);\r\n                          //  this.score++;\r\n                         //   this.scoreText.string = this.score.toString();\r\n                            //tween(this.coins.children[i].position).to(1, this.node.position).start();\r\n                            let pos = this.coins.children[i].position.clone();\r\n                            pos.x = math.lerp(pos.x, this.node.position.x, 1.8 / this.fadeTime * deltaTime * 4);\r\n                            pos.z = math.lerp(pos.z, this.node.position.z + this.speeds[this.phase] / 15, 1.8 / this.fadeTime * deltaTime * 4);\r\n                            pos.y = math.lerp(pos.y, this.node.position.y+0.8, 1.8 / this.fadeTime * deltaTime * 4);\r\n                            this.coins.children[i].setPosition(pos);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.curentZ += this.runSpeed * deltaTime;\r\n            let pos = this.node.position.clone();\r\n            pos.z = this.curentZ;\r\n            if (this.turn) {\r\n                pos.x = math.lerp(pos.x, this.targetX, 1.8 / this.fadeTime * deltaTime);\r\n            }\r\n            this.node.setPosition(pos);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}