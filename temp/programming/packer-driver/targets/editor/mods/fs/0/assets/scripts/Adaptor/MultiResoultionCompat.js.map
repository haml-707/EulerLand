{"version":3,"sources":["file:///C:/Users/86152/Desktop/laowang/EulerLand/assets/scripts/Adaptor/MultiResoultionCompat.ts"],"names":["ccclass","property","cc","_decorator","MultiResolutionCompat","Component","onLoad","view","setDesignResolutionSize","DEFAULT_RESOLUTION_WIDTH","DEFAULT_RESOLUTION_HEIGHT","ResolutionPolicy","SHOW_ALL","getShowAllModeScale","Math","min","getCanvasSize","width","height","getShowAllModeRealHeight","getShowAllModeRealWidth","getShowAllModeVerticalBorderHeight","getShowAllModeHorizontalBorderWidth","getShowAllModeNodePositionCloseToBottom","nodePosInDesign","srcScaleForShowAll","bottomBorderHeightInCanvas","srcNodePosYInCanvas","y","finalNodePosYInCanvas","nodePosYInDesign","v2","x","convertNodePosInDesignToNodePosInCanvas","sub","convertNodePosInCanvasToNodePosInDesign","nodePosInCanvas","div","convertWidthInDesignToWidthInCanvas","widthInDesign","convertWidthInCanvasToWidthInDesign","widthInCanvas","convertHeightInDesignToHeightInCanvas","heightInDesign","convertHeightInCanvasToHeightInDesign","heightIncanvas"],"mappings":"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","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * 未完成\r\n */\r\n@ccclass\r\nexport default class MultiResolutionCompat extends cc.Component {\r\n    static DEFAULT_RESOLUTION_WIDTH = 720;\r\n    static DEFAULT_RESOLUTION_HEIGHT = 1280;\r\n\r\n    onLoad() {\r\n\r\n        cc.view.setDesignResolutionSize(\r\n            MultiResolutionCompat.DEFAULT_RESOLUTION_WIDTH,\r\n            MultiResolutionCompat.DEFAULT_RESOLUTION_HEIGHT,\r\n            cc.ResolutionPolicy.SHOW_ALL\r\n        );\r\n\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，设计分辨率做出的缩放值\r\n     */\r\n    static getShowAllModeScale(): number {\r\n        return Math.min(\r\n            cc.view.getCanvasSize().width / this.DEFAULT_RESOLUTION_WIDTH,\r\n            cc.view.getCanvasSize().height / this.DEFAULT_RESOLUTION_HEIGHT\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，设计分辨率下的界面在实际画布中的实际高度\r\n     */\r\n    static getShowAllModeRealHeight(): number {\r\n        return this.DEFAULT_RESOLUTION_HEIGHT * this.getShowAllModeScale();\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，设计分辨率下的界面在实际画布中的实际宽度\r\n     */\r\n    static getShowAllModeRealWidth(): number {\r\n        return this.DEFAULT_RESOLUTION_WIDTH * this.getShowAllModeScale();\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，上下边界的黑边之和在实际画布中的长度\r\n     */\r\n    static getShowAllModeVerticalBorderHeight(): number {\r\n        return cc.view.getCanvasSize().height - this.getShowAllModeRealHeight();\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，左右边界的黑边之和在实际画布中的长度\r\n     */\r\n    static getShowAllModeHorizontalBorderWidth(): number {\r\n        return cc.view.getCanvasSize().width - this.getShowAllModeRealWidth();\r\n    }\r\n\r\n    /**\r\n     * 计算当前游戏设计分辨率在ShowAll模式适配后，传入来的原始坐标在ShowAll模式下的「贴近屏幕底部」实际坐标值\r\n     */\r\n    static getShowAllModeNodePositionCloseToBottom(nodePosInDesign: cc.Vec2): cc.Vec2 {\r\n        let srcScaleForShowAll = MultiResolutionCompat.getShowAllModeScale();\r\n        let bottomBorderHeightInCanvas = MultiResolutionCompat.getShowAllModeVerticalBorderHeight() / 2;\r\n        let srcNodePosYInCanvas = nodePosInDesign.y * srcScaleForShowAll;\r\n        let finalNodePosYInCanvas = srcNodePosYInCanvas - bottomBorderHeightInCanvas;\r\n        let nodePosYInDesign = finalNodePosYInCanvas / srcScaleForShowAll;\r\n        return cc.v2(nodePosInDesign.x, nodePosYInDesign);\r\n    }\r\n\r\n    /**\r\n     * 将节点在设计分辨率中的坐标转换为节点在实际画布中的坐标\r\n     */\r\n    static convertNodePosInDesignToNodePosInCanvas(nodePosInDesign: cc.Vec2) {\r\n        return nodePosInDesign.sub(cc.v2(this.getShowAllModeScale(), this.getShowAllModeScale()));\r\n    }\r\n\r\n    /**\r\n     * 将节点在实际画布中的坐标转换为节点在设计分辨率中的坐标\r\n     */\r\n    static convertNodePosInCanvasToNodePosInDesign(nodePosInCanvas: cc.Vec2) {\r\n        return nodePosInCanvas.div(cc.v2(this.getShowAllModeScale(), this.getShowAllModeScale()));\r\n    }\r\n\r\n    /**\r\n     * 将设计分辨率下的宽度转换为实际画布中的宽度\r\n     *\r\n     * @param widthInDesign 设计分辨率下的宽度\r\n     */\r\n    static convertWidthInDesignToWidthInCanvas(widthInDesign: number) {\r\n        return widthInDesign * this.getShowAllModeScale();\r\n    }\r\n\r\n    /**\r\n     * 将实际画布中的宽度转换为设计分辨率下的宽度\r\n     *\r\n     * @param widthInCanvas 画布中的宽度\r\n     */\r\n    static convertWidthInCanvasToWidthInDesign(widthInCanvas: number) {\r\n        return widthInCanvas / this.getShowAllModeScale();\r\n    }\r\n\r\n    /**\r\n     * 将设计分辨率下的高度转换为实际画布中的高度\r\n     *\r\n     * @param heightInDesign 设计分辨率下的高度\r\n     */\r\n    static convertHeightInDesignToHeightInCanvas(heightInDesign: number) {\r\n        return heightInDesign * this.getShowAllModeScale();\r\n    }\r\n\r\n    /**\r\n     * 将实际画布中的高度转换为设计分辨率下的宽度\r\n     * @param heightIncanvas 画布中的高度\r\n     */\r\n    static convertHeightInCanvasToHeightInDesign(heightIncanvas: number) {\r\n        return heightIncanvas / this.getShowAllModeScale();\r\n    }\r\n}\r\n"]}