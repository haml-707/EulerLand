System.register(["./fog-c82f3158.js","./renderable-component-542a40ea.js"],(function(t){"use strict";var e,n,r,i,a,s,o,u,l,c,h,f,p,d,_,v,m,g,y,b,w,S,M,A,I,T,P,E,k,C,R,F,O,L,B,x,W,z,D,U,V,q,N,j,G;return{setters:[function(t){e=t.eQ,n=t.fz,r=t.cW,i=t.cY,a=t.c_,s=t.d1,o=t.fA,u=t.fB,l=t.eh,c=t.w,h=t.l,f=t.f,p=t.df,d=t.dy,_=t.fH,v=t.de,m=t.eN,g=t.t,y=t.eM,b=t.dX,w=t.fI,S=t.f3,M=t.dH,A=t.cU,I=t.d8,T=t.d4,P=t.e,E=t.e8,k=t.dx,C=t.fJ,R=t.fK,F=t.fL,O=t.fM,L=t.fF,B=t.eY,x=t.eS,W=t.eO,z=t.fN,D=t.d,U=t.dW,V=t.eX,q=t.eT,N=t.fD,j=t.ek},function(t){G=t.e}],execute:function(){function H(t){return t*t}function Y(t){return t*(2-t)}function Q(t){return t*t*t}function X(t){return--t*t*t+1}function J(t){return t*t*t*t}function K(t){return 1- --t*t*t*t}function Z(t){return t*t*t*t*t}function $(t){return--t*t*t*t*t+1}function tt(t){return 1===t?1:1-Math.cos(t*Math.PI/2)}function et(t){return Math.sin(t*Math.PI/2)}function nt(t){return 0===t?0:Math.pow(1024,t-1)}function rt(t){return 1===t?1:1-Math.pow(2,-10*t)}function it(t){return 1-Math.sqrt(1-t*t)}function at(t){return Math.sqrt(1- --t*t)}function st(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}function ot(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}function ut(t){if(1===t)return 1;var e=1.70158;return t*t*((e+1)*t-e)}function lt(t){if(0===t)return 0;var e=1.70158;return--t*t*((e+1)*t+e)+1}function ct(t){return 1-ht(1-t)}function ht(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}t({a:Xt,e:Zt,f:te,g:oe,i:Qt,j:he,l:function(t,e){for(var n=t,r="";null!==n&&n!==e;)r=n.name+"/"+r,n=n.parent;return r.slice(0,-1)},m:function(t,e,n){for(s.identity(n);t!==e;)s.fromRTS(pn,t.rotation,t.position,t.scale),s.multiply(n,pn,n),t=t.parent;return n},n:X,o:function(t,e){for(var n=0,r=s.IDENTITY;t;){if(t.stamp===e||t.stamp+1===e&&!t.node.hasChangedFlags){r=t.world,t.stamp=e;break}t.stamp=e,hn[n++]=t,t=t.parent}for(;n>0;){var i=(t=hn[--n]).node;s.fromRTS(t.local,i.rotation,i.position,i.scale),r=s.multiply(t.world,r,t.local)}return r},p:function(t){for(var e=fn.get(t.uuid)||null;e;)fn.delete(e.node.uuid),e=e.parent},q:function(t,e){for(var n,r=null,i=0;t!==e;){var a=t.uuid;if(fn.has(a)){r=fn.get(a);break}r={node:t,local:new s,world:new s,stamp:-1,parent:null},fn.set(a,r),hn[i++]=r,t=t.parent,r=null}for(;i>0;)(n=hn[--i]).parent=r,r=n;return r},s:ce});var ft=St(H,Y),pt=St(Q,X),dt=St(J,K),_t=St(Z,$),vt=St(tt,et),mt=St(nt,rt),gt=St(it,at),yt=St(st,ot),bt=St(ut,lt),wt=St(ct,ht);function St(t,e){return function(n){return n<.5?e(2*n)/2:t(2*n-1)/2+.5}}var Mt,At,It,Tt,Pt,Et,kt,Ct,Rt,Ft,Ot,Lt=Object.freeze({__proto__:null,constant:function(){return 0},linear:function(t){return t},quadIn:H,quadOut:Y,quadInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:Q,cubicOut:X,cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quartIn:J,quartOut:K,quartInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quintIn:Z,quintOut:$,quintInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sineIn:tt,sineOut:et,sineInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},expoIn:nt,expoOut:rt,expoInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circIn:it,circOut:at,circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:st,elasticOut:ot,elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)},backIn:ut,backOut:lt,backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:ct,bounceOut:ht,bounceInOut:function(t){return t<.5?.5*ct(2*t):.5*ht(2*t-1)+.5},smooth:function(t){return t<=0?0:t>=1?1:t*t*(3-2*t)},fade:function(t){return t<=0?0:t>=1?1:t*t*t*(t*(6*t-15)+10)},quadOutIn:ft,cubicOutIn:pt,quartOutIn:dt,quintOutIn:_t,sineOutIn:vt,expoOutIn:mt,circOutIn:gt,elasticOutIn:yt,backOutIn:bt,bounceOutIn:wt});function Bt(t,e){return(e<<3)+t}t("c",Lt),function(t){t[t.Uint8=0]="Uint8",t[t.Uint16=1]="Uint16",t[t.Uint32=2]="Uint32",t[t.Int8=3]="Int8",t[t.Int16=4]="Int16",t[t.Int32=5]="Int32",t[t.Float32=6]="Float32",t[t.Float64=7]="Float64"}(Ft||(Ft={})),function(t){t[t.Scalar=0]="Scalar",t[t.Vec2=1]="Vec2",t[t.Vec3=2]="Vec3",t[t.Vec4=3]="Vec4",t[t.Quat=4]="Quat",t[t.Mat4=5]="Mat4"}(Ot||(Ot={}));var xt=t("b",e("cc.CompactValueTypeArray")((Ct=kt=function(){function t(){o(this,"_byteOffset",It,this),o(this,"_unitCount",Tt,this),o(this,"_unitElement",Pt,this),o(this,"_length",Et,this)}return t.lengthFor=function(t,e,n){return Wt(e).requiredUnits*t.length*zt(n).BYTES_PER_ELEMENT},t.compress=function(e,n,r,i,a,s){for(var o=Wt(n),u=zt(r),l=o.requiredUnits*e.length,c=new u(i,a,l),h=0;h<e.length;++h)o.compress(c,h,e[h]);var f=new t;return f._unitElement=Bt(r,n),f._byteOffset=s,f._unitCount=l,f._length=e.length,f},t.prototype.decompress=function(t){for(var e,n={storageUnit:7&(e=this._unitElement),elementType:e>>3},r=n.storageUnit,i=Wt(n.elementType),a=new(zt(r))(t,this._byteOffset,this._unitCount),s=new Array(this._length),o=0;o<this._length;++o)s[o]=i.decompress(a,o);return s},t}(),kt.StorageUnit=Ft,kt.ElementType=Ot,It=n((At=Ct).prototype,"_byteOffset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tt=n(At.prototype,"_unitCount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pt=n(At.prototype,"_unitElement",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Bt(Ft.Uint8,Ot.Scalar)}}),Et=n(At.prototype,"_length",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mt=At))||Mt);function Wt(t){return Yt[t]}function zt(t){switch(t){case Ft.Uint8:return Uint8Array;case Ft.Uint16:return Uint16Array;case Ft.Uint32:return Uint32Array;case Ft.Int8:return Int8Array;case Ft.Int16:return Int16Array;case Ft.Int32:return Int32Array;case Ft.Float32:return Float32Array;case Ft.Float64:return Float64Array}}var Dt,Ut,Vt,qt,Nt,jt,Gt,Ht,Yt=((Rt={})[Ot.Scalar]={requiredUnits:1,compress:function(t,e,n){t[e]=n},decompress:function(t,e){return t[e]}},Rt[Ot.Vec2]={requiredUnits:2,compress:function(t,e,n){t[2*e]=n.x,t[2*e+1]=n.y},decompress:function(t,e){return new r(t[2*e],t[2*e+1])}},Rt[Ot.Vec3]={requiredUnits:3,compress:function(t,e,n){t[3*e]=n.x,t[3*e+1]=n.y,t[3*e+2]=n.z},decompress:function(t,e){return new r(t[3*e],t[3*e+1],t[3*e+2])}},Rt[Ot.Vec4]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new i(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},Rt[Ot.Quat]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new a(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},Rt[Ot.Mat4]={requiredUnits:16,compress:function(t,e,n){s.toArray(t,n,16*e)},decompress:function(t,e){return s.fromArray(new s,t,16*e)}},Rt);function Qt(t){return"string"==typeof t||"number"==typeof t}function Xt(t,e){return t instanceof e}var Jt=t("H",e("cc.animation.HierarchyPath")((qt=function(){function t(t){o(this,"path",Vt,this),this.path=t||""}return t.prototype.get=function(t){return t instanceof l?t.getChildByPath(this.path)||(c('Node "'+t.name+'" has no path "'+this.path+'"'),null):(c("Target of hierarchy path should be of type Node."),null)},t}(),Vt=n((Ut=qt).prototype,"path",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Dt=Ut))||Dt),Kt=t("C",e("cc.animation.ComponentPath")((Ht=function(){function t(t){o(this,"component",Gt,this),this.component=t||""}return t.prototype.get=function(t){return t instanceof l?t.getComponent(this.component)||(c('Node "'+t.name+'" has no component "'+this.component+'"'),null):(c("Target of component path should be of type Node."),null)},t}(),Gt=n((jt=Ht).prototype,"component",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Nt=jt))||Nt);function Zt(t){for(var e=t,n=0;n<(arguments.length<=1?0:arguments.length-1);++n){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(Qt(r)){if(!(r in e))return c('Target object has no property "'+r+'"'),null;e=e[r]}else e=r.get(e);if(null===e)break}return e}function $t(t,e,n){void 0===n&&(n=1e-6);for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(s>e+n)i=a-1;else{if(!(s<e-n))return a;r=a+1}}return~r}function te(t,e,n,r,i){var a=1-i;return a*(a*(t+(3*e-t)*i)+3*n*i*i)+r*i*i*i}h.bezier=te;var ee=Math.cos,ne=Math.acos,re=Math.max,ie=2*Math.PI,ae=Math.sqrt;function se(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function oe(t,e){var n=function(t,e){var n,r,i,a,s=e-0,o=e-t[0],u=3*s,l=3*o,c=3*(e-t[2]),h=1/(-s+l-c+(e-1)),f=1/3,p=(u-6*o+c)*h,d=p*f,_=(-u+l)*h,v=(3*_-p*p)*f,m=v*f,g=(2*p*p*p-9*p*_+s*h*27)/27,y=g/2,b=y*y+m*m*m;if(b<0){var w=-v*f,S=ae(w*w*w),M=-g/(2*S),A=ne(M<-1?-1:M>1?1:M),I=2*se(S);return r=I*ee(A*f)-d,i=I*ee((A+ie)*f)-d,a=I*ee((A+2*ie)*f)-d,r>=0&&r<=1?i>=0&&i<=1?a>=0&&a<=1?re(r,i,a):re(r,i):a>=0&&a<=1?re(r,a):r:i>=0&&i<=1?a>=0&&a<=1?re(i,a):i:a}if(0===b)return i=-(n=y<0?se(-y):-se(y))-d,(r=2*n-d)>=0&&r<=1?i>=0&&i<=1?re(r,i):r:i;var T=ae(b);return(n=se(-y+T))-se(y+T)-d}(t,e),r=t[1];return((1-n)*(r+(t[3]-r)*n)*3+n*n)*n}h.bezierByTime=oe;var ue=t("R",function(){function t(t){var e,n;this.ratios=void 0,this._findRatio=void 0,this.ratios=t;for(var r=!0,i=1,a=t.length;i<a;i++)if(e=t[i]-t[i-1],1===i)n=e;else if(Math.abs(e-n)>1e-6){r=!1;break}this._findRatio=r?fe:$t}return t.prototype.sample=function(t){return this._findRatio(this.ratios,t)},t}());h.RatioSampler=ue;var le=t("h",function(){function t(e,n){this.types=void 0,this.type=null,this._values=[],this._lerp=void 0,this._duration=void 0,this._array=void 0,this._duration=n,this._values=e.values;var r=function(e){return"string"==typeof e?e:Array.isArray(e)?e[0]===e[1]&&e[2]===e[3]?t.Linear:t.Bezier(e):t.Linear};if(void 0!==e.easingMethod)this.type=r(e.easingMethod);else if(Array.isArray(e.easingMethods))this.types=e.easingMethods.map(r);else if(void 0!==e.easingMethods){this.types=new Array(this._values.length).fill(null);for(var i=0,a=Object.keys(e.easingMethods);i<a.length;i++){var s=a[i];this.types[s]=r(e.easingMethods[s])}}else this.type=null;var o=e.values[0];(void 0===e.interpolate||e.interpolate)&&(this._lerp=Ee(o)),void 0!==e._arrayLength&&(this._array=new Array(e._arrayLength))}t.Bezier=function(t){return t};var e=t.prototype;return e.hasLerp=function(){return!!this._lerp},e.valueAt=function(t){if(void 0===this._array){var e=this._values[t];return e&&e.getNoLerp?e.getNoLerp():e}for(var n=0;n<this._array.length;++n)this._array[n]=this._values[this._array.length*t+n];return this._array},e.valueBetween=function(t,e,n,r,i){if(this._lerp){var a=this.types?this.types[e]:this.type,s=i-n,o=(t-n)/s;if(a&&(o=he(o,a)),void 0===this._array){var u=this._values[e],l=this._values[r];return this._lerp(u,l,o,s*this._duration)}for(var c=0;c<this._array.length;++c){var h=this._values[this._array.length*e+c],f=this._values[this._array.length*r+c];this._array[c]=this._lerp(h,f,o,s*this._duration)}return this._array}if(void 0===this._array)return this.valueAt(e);for(var p=0;p<this._array.length;++p)this._array[p]=this._values[this._array.length*e+p];return this._array},e.empty=function(){return 0===this._values.length},e.constant=function(){return 1===this._values.length},t}());function ce(t,e,n){var r=e.sample(n);if(r<0)if((r=~r)<=0)r=0;else{if(!(r>=e.ratios.length))return t.valueBetween(n,r-1,e.ratios[r-1],r,e.ratios[r]);r=e.ratios.length-1}return t.valueAt(r)}function he(t,e){if("string"==typeof e){var n=Lt[e];n?t=n(t):f(3906,e)}else Array.isArray(e)&&(t=oe(e,t));return t}function fe(t,e){var n=t.length-1;if(0===n)return 0;var r=t[0];if(e<r)return 0;var i=t[n];if(e>i)return n;var a=(e=(e-r)/(i-r))/(1/n),s=0|a,o=1e-6;return a-s<o?s:s+1-a<o?s+1:~(s+1)}le.Linear=null,h.AnimCurve=le,t("E",function(){function t(){this.events=[]}return t.prototype.add=function(t,e){this.events.push({func:t||"",params:e||[]})},t}()),h.sampleAnimationCurve=ce;var pe,de,_e,ve,me,ge,ye,be,we,Se,Me,Ae,Ie,Te,Pe,Ee=function(){function t(t,e,n,r){return t.lerp(e,n,r)}return function(e){if(null!==e){if("number"==typeof e)return p;if("object"==typeof e&&e.constructor){if(e instanceof a)return n=new a,function(t,e,r){return a.slerp(n,t,e,r)};if(e instanceof d)return function(t){var e=new t;return function(n,r,i){return t.lerp(e,n,r,i),e}}(e.constructor);if(e.constructor===Number)return p;if(_(e))return t}var n}}}(),ke=t("S",function(){function t(){}return t.getOrExtract=function(e){var n=t.pool.get(e);return n&&n.info.sample===e.sample||(n&&h.director.root.dataPoolManager.releaseAnimationClip(e),n=function(t){var e={};t.curves.forEach((function(t){if(!t.valueAdapter&&Xt(t.modifiers[0],Jt)&&Qt(t.modifiers[1])){var n=t.modifiers[0].path,r=e[n];r||(r=e[n]={}),r[t.modifiers[1]]={values:t.data.values,keys:t.data.keys}}}));for(var n=Math.ceil(t.sample*t.duration)+1,r=function(){var r=a[i],o=e[r];if(!o)return"continue";Object.defineProperty(o,"worldMatrix",{get:function(){if(!o._worldMatrix){var i=o.position,a=o.rotation,u=o.scale;Ce(t,i,n),Ce(t,a,n),Ce(t,u,n),function(t,e,n){var r=n.position.values,i=n.rotation.values,a=n.scale.values,o=r.map((function(){return new s})),u=e.lastIndexOf("/"),l=null;if(u>0){var c=t[e.substring(0,u)];if(!c)return void console.warn("no data for parent bone?");l=c.worldMatrix.values}for(var h=0;h<r.length;h++){var f=r[h],p=i[h],d=a[h],_=o[h];s.fromRTS(_,p,f,d),l&&s.multiply(_,l[h],_)}Object.keys(n).forEach((function(t){return delete n[t]})),n._worldMatrix={keys:0,interpolate:!1,values:o}}(e,r,o)}return o._worldMatrix}})},i=0,a=Object.keys(e);i<a.length;i++)r();return{info:{frames:n,sample:t.sample},data:e}}(e),t.pool.set(e,n)),n},t.destroy=function(e){t.pool.delete(e)},t}());function Ce(t,e,n){var r=t.keys[e.keys],i=[];if(r&&1!==r.length)for(var s=e.values[0]instanceof a,o=0,u=0;o<n;o++){for(var l=o/t.sample;r[u]<=l;)u++;u>r.length-1?l=r[u=r.length-1]:0===u&&(u=1);var c=e.values[u-1].clone(),h=r[u]-r[u-1],f=h?v((l-r[u-1])/h):1;s?c.slerp(e.values[u],f):c.lerp(e.values[u],f),i[o]=c}else for(var p=0;p<n;p++)i[p]=e.values[0].clone();e.values=i}ke.pool=new Map;var Re=t("k",e("cc.AnimationClip")((Pe=Te=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,o(e,"sample",_e,S(e)),o(e,"speed",ve,S(e)),o(e,"wrapMode",me,S(e)),o(e,"events",ge,S(e)),o(e,"enableTrsBlending",ye,S(e)),o(e,"_duration",be,S(e)),o(e,"_keys",we,S(e)),o(e,"_stepness",Se,S(e)),o(e,"_curves",Me,S(e)),o(e,"_commonTargets",Ae,S(e)),o(e,"_hash",Ie,S(e)),e.frameRate=0,e._ratioSamplers=[],e._runtimeCurves=void 0,e._runtimeEvents=void 0,e._data=null,e}m(e,t),e.createWithSpriteFrames=function(t,n){if(!Array.isArray(t))return f(3905),null;var r=new e;r.sample=n||r.sample,r.duration=t.length/r.sample;for(var i=1/r.sample,a=new Array(t.length),s=new Array(a.length),o=0;o<t.length;o++)a[o]=o*i,s[o]=t[o];return r.keys=[a],r.curves=[{modifiers:[new Kt("cc.Sprite"),"spriteFrame"],data:{keys:0,values:s}}],r};var n=e.prototype;return n.onLoaded=function(){this.frameRate=this.sample,this._decodeCVTAs()},n.getPropertyCurves=function(){return this._runtimeCurves||this._createPropertyCurves(),this._runtimeCurves},n.updateEventDatas=function(){delete this._runtimeEvents},n.getEventGroupIndexAtRatio=function(t){return this._runtimeEvents||this._createRuntimeEvents(),$t(this._runtimeEvents.ratios,t)},n.hasEvents=function(){return 0!==this.events.length},n.destroy=function(){return h.director.root.dataPoolManager&&h.director.root.dataPoolManager.releaseAnimationClip(this),ke.destroy(this),t.prototype.destroy.call(this)},n._createPropertyCurves=function(){var t=this;this._ratioSamplers=this._keys.map((function(e){return new ue(e.map((function(e){return e/t._duration})))})),this._runtimeCurves=this._curves.map((function(e){return{curve:new le(e.data,t._duration),modifiers:e.modifiers,valueAdapter:e.valueAdapter,sampler:t._ratioSamplers[e.data.keys],commonTarget:e.commonTarget}})),this._applyStepness()},n._createRuntimeEvents=function(){for(var t,e=this,n=[],r=[],i=this.events.sort((function(t,e){return t.frame-e.frame})),a=function(){var i=t.value,a=i.frame/e._duration,s=n.findIndex((function(t){return t===a}));s<0&&(s=n.length,n.push(a),r.push({events:[]})),r[s].events.push({functionName:i.func,parameters:i.params})},s=g(i);!(t=s()).done;)a();this._runtimeEvents={ratios:n,eventGroups:r}},n._applyStepness=function(){},n._decodeCVTAs=function(){var t=ArrayBuffer.isView(this._nativeAsset)?this._nativeAsset.buffer:this._nativeAsset;if(t){for(var e=this._keys,n=0;n<e.length;++n){var r=e[n];r instanceof xt&&(e[n]=r.decompress(t))}for(var i=0;i<this._curves.length;++i){var a=this._curves[i];a.data.values instanceof xt&&(a.data.values=a.data.values.decompress(t))}}},n.validate=function(){return this.keys.length>0&&this.curves.length>0},y(e,[{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"keys",get:function(){return this._keys},set:function(t){this._keys=t}},{key:"eventGroups",get:function(){return this._runtimeEvents||this._createRuntimeEvents(),this._runtimeEvents.eventGroups}},{key:"stepness",get:function(){return this._stepness},set:function(t){this._stepness=t,this._applyStepness()}},{key:"hash",get:function(){if(this._hash)return this._hash;var t=this._nativeAsset,e=new Uint8Array(ArrayBuffer.isView(t)?t.buffer:t);return this._hash=M(e,666)}},{key:"curves",get:function(){return this._curves},set:function(t){this._curves=t,delete this._runtimeCurves}},{key:"data",get:function(){return this._data}},{key:"commonTargets",get:function(){return this._commonTargets},set:function(t){this._commonTargets=t}}]),e}(b),Te.WrapMode=w,_e=n((de=Pe).prototype,"sample",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),ve=n(de.prototype,"speed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),me=n(de.prototype,"wrapMode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Normal}}),ge=n(de.prototype,"events",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=n(de.prototype,"enableTrsBlending",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=n(de.prototype,"_duration",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),we=n(de.prototype,"_keys",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=n(de.prototype,"_stepness",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Me=n(de.prototype,"_curves",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ae=n(de.prototype,"_commonTargets",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ie=n(de.prototype,"_hash",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=de))||pe);function Fe(t,e,n){var r=e[e.length-1];if(0!==e.length&&Qt(r)&&!n){var i=Zt.apply(void 0,[t].concat(e.slice(0,e.length-1)));return null===i?null:{setValue:function(t){i[r]=t},getValue:function(){return i[r]}}}if(n){var a=Zt.apply(void 0,[t].concat(e));if(null===a)return null;var s=n.forTarget(a);return{setValue:function(t){s.set(t)},getValue:function(){return s.get?s.get():(P("Target doesn't provide a get method."),null)}}}return P("Empty animation curve."),null}function Oe(t,e,n){var r=Fe(t,e,n);if(null===r)return null;var i=r.getValue(),a=Be(i);if(!a)return P("Value is not copyable!"),null;var s=a.createBuffer(),o=a.copy;return Object.assign(r,{peek:function(){return s},pull:function(){var t=r.getValue();o(s,t)},push:function(){r.setValue(s)}})}h.AnimationClip=Re;var Le,Be=((Le=new Map).set(A,{createBuffer:function(){return new A},copy:A.copy}),Le.set(r,{createBuffer:function(){return new r},copy:r.copy}),Le.set(i,{createBuffer:function(){return new i},copy:i.copy}),Le.set(I,{createBuffer:function(){return new I},copy:I.copy}),Le.set(T,{createBuffer:function(){return new T},copy:function(t,e){return t.set(e)}}),function(t){return Le.get(null==t?void 0:t.constructor)}),xe=function(){function t(){this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}var e=t.prototype;return e.play=function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(E(3912)):(this._isPlaying=!0,this.onPlay())},e.stop=function(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)},e.pause=function(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())},e.resume=function(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())},e.step=function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()},e.update=function(){},e.onPlay=function(){},e.onPause=function(){},e.onResume=function(){},e.onStop=function(){},e.onError=function(){},y(t,[{key:"isPlaying",get:function(){return this._isPlaying}},{key:"isPaused",get:function(){return this._isPaused}},{key:"isMotionless",get:function(){return!this.isPlaying||this.isPaused}}]),t}();function We(t){return!function(t){return"rotation"===t}(t)}t("B",function(){function t(){this._nodeBlendStates=new Map,this._states=new Set}var e=t.prototype;return e.ref=function(t,e){var n=this._nodeBlendStates.get(t);n||(n={dirty:!1,properties:{}},this._nodeBlendStates.set(t,n));var i=n.properties[e];return i||(i=n.properties[e]=new De(n,We(e)?new r:new a)),++i.refCount,i},e.deRef=function(t,e){var n=this._nodeBlendStates.get(t);if(n){var r=n.properties[e];r&&(--r.refCount,r.refCount>0||(delete n.properties[e],function(t){return!(t.properties.position||t.properties.rotation||t.properties.eulerAngles||t.properties.scale)}(n)&&this._nodeBlendStates.delete(t)))}},e.apply=function(){this._nodeBlendStates.forEach((function(t,e){if(t.dirty){t.dirty=!1;var n,r,i,a=t.properties,s=a.position,o=a.scale,u=a.rotation,l=a.eulerAngles,c=!1;s&&0!==s.weight&&(s.weight=0,n=s.value,c=!0),o&&0!==o.weight&&(o.weight=0,r=o.value,c=!0),u&&0!==u.weight&&(u.weight=0,i=u.value,c=!0),l&&0!==l.weight&&(l.weight=0,i=l.value,c=!0),c&&e.setRTS(i,n,r)}})),this._states.forEach((function(t){t.onBlendFinished()}))},e.bindState=function(t){this._states.add(t)},e.unbindState=function(t){this._states.delete(t)},t}());var ze,De=function(){function t(t,e){this.weight=0,this.value=void 0,this.refCount=0,this._node=void 0,this._node=t,this.value=e}return t.prototype.markAsDirty=function(){this._node.dirty=!0},t}();function Ue(t,e,n){return 0===n.weight&&r.zero(n.value),0===e?n.value:1===e?r.copy(n.value,t):r.scaleAndAdd(n.value,n.value,t,e)}function Ve(t,e,n){if(0===n.weight&&a.identity(n.value),0===e)return n.value;if(1===e)return a.copy(n.value,t);var r=e/(n.weight+e);return a.slerp(n.value,n.value,t,r)}!function(t){t.PLAY="play",t.STOP="stop",t.PAUSE="pause",t.RESUME="resume",t.LASTFRAME="lastframe",t.FINISHED="finished"}(ze||(ze={})),k(ze);var qe=function(){function t(t,e,n){this.commonTargetIndex=void 0,this._curve=void 0,this._boundTarget=void 0,this._rootTargetProperty=void 0,this._curveDetail=void 0,this._curve=t.curve,this._curveDetail=t,this._boundTarget=n,this._shouldLerp=t.curve.hasLerp()}var e=t.prototype;return e.applySample=function(t,e,n,r,i){var a;a=this._shouldLerp&&n?this._curve.valueBetween(t,r.from,r.fromRatio,r.to,r.toRatio):this._curve.valueAt(e),this._setValue(a,i)},e._setValue=function(t){this._boundTarget.setValue(t)},y(t,[{key:"propertyName",get:function(){return this._rootTargetProperty||""}},{key:"curveDetail",get:function(){return this._curveDetail}}]),t}(),Ne=t("A",function(t){function e(e,n){var r;return void 0===n&&(n=""),(r=t.call(this)||this).duration=1,r.speed=1,r.time=0,r.weight=0,r.frameRate=0,r._targetNode=null,r._curveLoaded=!1,r._clip=void 0,r._process=r.process,r._samplerSharedGroups=[],r._target=null,r._ignoreIndex=-1,r._commonTargetStatuses=[],r._wrapMode=w.Normal,r._repeatCount=1,r._delay=0,r._delayTime=0,r._currentFramePlayed=!1,r._name=void 0,r._lastIterations=void 0,r._lastWrapInfo=null,r._lastWrapInfoEvent=null,r._wrappedInfo=new R,r._blendStateBuffer=null,r._blendStateWriters=[],r._allowLastFrame=!1,r._blendStateWriterHost={weight:0,enabled:!1},r._playbackRange=void 0,r._playbackDuration=0,r._invDuration=1,r._clip=e,r._name=n||e&&e.name,r._playbackRange={min:0,max:r._clip.duration},r._playbackDuration=e.duration,e.duration||F("Clip "+e.name+" has zero duration."),r}m(e,t);var n=e.prototype;return n.initialize=function(t,e){var n,r,i=this;if(!this._curveLoaded){this._curveLoaded=!0,this._destroyBlendStateWriters(),this._samplerSharedGroups.length=0,this._blendStateBuffer=null!==(n=null===(r=h.director.getAnimationManager())||void 0===r?void 0:r.blendState)&&void 0!==n?n:null,this._blendStateBuffer&&this._blendStateBuffer.bindState(this),this._targetNode=t;var a=this._clip;this.duration=a.duration,this._invDuration=1/this.duration,this.speed=a.speed,this.wrapMode=a.wrapMode,this.frameRate=a.sample,this._playbackRange={min:0,max:a.duration},this._playbackDuration=a.duration,(this.wrapMode&C.Loop)===C.Loop?this.repeatCount=1/0:this.repeatCount=1;var s=function(t,e,n,r,s){if(!(a.enableTrsBlending&&function(t){var e;if(1===t.length&&"string"==typeof t[0])e=t[0];else if(t.length>1){for(var n=0;n<t.length-1;++n)if(!(t[n]instanceof Jt))return!1;e=t[t.length-1]}switch(e){case"position":case"scale":case"rotation":case"eulerAngles":return!0;default:return!1}}(n)&&i._blendStateBuffer))return t(e,n,r);var o,u,c,h,f,p,d,_,v,m=Zt.apply(void 0,[e].concat(n.slice(0,n.length-1)));if(null!==m&&m instanceof l){var g=n[n.length-1],y=(o=i._blendStateBuffer,u=m,c=g,h=i._blendStateWriterHost,f=s,p=We(c)?Ue:Ve,d=o.ref(u,c),_=!1,v=-1,{destroy:function(){d&&(o.deRef(u,c),d=null)},forTarget:function(){return{get:function(){return u[c]},set:function(t){if(d&&h.enabled){var e=h.weight;if(f)if(1!==e||e!==v)_=!1;else if(_)return;p(t,e,d),d.weight+=e,d.markAsDirty(),_=!0,v=e}}}}});return i._blendStateWriters.push(y),t(e,[],y)}return null};this._commonTargetStatuses=a.commonTargets.map((function(e){var n=s(Oe,t,e.modifiers,e.valueAdapter,!1);return null===n?null:{target:n,changed:!1}})),e||(e=a.getPropertyCurves());for(var o=function(n){var r=e[n];if(r.curve.empty())return"continue";var a=i._samplerSharedGroups.find((function(t){return t.sampler===r.sampler}));a||(a={sampler:r.sampler,curves:[],samplerResultCache:{from:0,fromRatio:0,to:0,toRatio:0}},i._samplerSharedGroups.push(a));var o=void 0;if(void 0===r.commonTarget)o=t;else{var u=i._commonTargetStatuses[r.commonTarget];if(!u)return"continue";o=u.target.peek()}var l=s(Fe,o,r.modifiers,r.valueAdapter,r.curve.constant());if(null===l);else{var c=new qe(r,o,l);c.commonTargetIndex=r.commonTarget,a.curves.push(c)}},u=0;u<e.length;++u)o(u)}},n.destroy=function(){this._destroyBlendStateWriters()},n.onBlendFinished=function(){this._blendStateWriterHost.enabled=!1},n.emit=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];h.director.getAnimationManager().pushDelayEvent(this._emit,this,e)},n.on=function(t,e,n){return this._target&&this._target.isValid?this._target.on(t,e,n):null},n.once=function(t,e,n){return this._target&&this._target.isValid?this._target.once(t,e,n):null},n.off=function(t,e,n){this._target&&this._target.isValid&&this._target.off(t,e,n)},n.allowLastFrameEvent=function(t){this._allowLastFrame=t},n._setEventTarget=function(t){this._target=t},n.setTime=function(t){this._currentFramePlayed=!1,this.time=t||0,this._lastWrapInfoEvent=null,this._ignoreIndex=-1;var e=this.getWrappedInfo(t,this._wrappedInfo),n=e.direction,r=this._clip.getEventGroupIndexAtRatio(e.ratio);r<0&&(r=~r-1,n<0&&(r+=1),this._ignoreIndex=r)},n.update=function(t){this._delayTime>0&&(this._delayTime-=t,this._delayTime>0)||(this._currentFramePlayed?this.time+=t*this.speed:this._currentFramePlayed=!0,this._process())},n.sample=function(){var t=this.getWrappedInfo(this.time,this._wrappedInfo);return this._sampleCurves(t.ratio),this._sampleEvents(t),t},n.onPlay=function(){this.setTime(0),this._delayTime=this._delay,this._onReplayOrResume(),this.emit(ze.PLAY,this)},n.onStop=function(){this.isPaused||this._onPauseOrStop(),this.emit(ze.STOP,this)},n.onResume=function(){this._onReplayOrResume(),this.emit(ze.RESUME,this)},n.onPause=function(){this._onPauseOrStop(),this.emit(ze.PAUSE,this)},n._sampleCurves=function(t){this._blendStateWriterHost.weight=this.weight,this._blendStateWriterHost.enabled=!0;for(var e=this._commonTargetStatuses,n=0,r=e.length;n<r;++n){var i=e[n];i&&(i.target.pull(),i.changed=!1)}for(var a=0,s=!1,o=this._samplerSharedGroups,u=0,l=o.length;u<l;++u){var c=o[u],h=c.sampler,f=c.samplerResultCache;s=!1,h?(a=h.sample(t))<0&&((a=~a)<=0?a=0:a>=h.ratios.length?a=h.ratios.length-1:(s=!0,f.from=a-1,f.fromRatio=h.ratios[f.from],f.to=a,f.toRatio=h.ratios[f.to],a=f.from)):a=0;for(var p=c.curves,d=0,_=p.length;d<_;++d){var v=p[d];if(v.applySample(t,a,s,f,this.weight),void 0!==v.commonTargetIndex){var m=e[v.commonTargetIndex];m&&(m.changed=!0)}}}for(var g=0,y=e.length;g<y;++g){var b=e[g];b&&b.changed&&b.target.push()}},n.process=function(){var t,e=this.sample();this._allowLastFrame&&(t=this._lastWrapInfo?this._lastWrapInfo:this._lastWrapInfo=new R(e),this.repeatCount>1&&(0|e.iterations)>(0|t.iterations)&&this.emit(ze.LASTFRAME,this),t.set(e)),e.stopped&&(this.stop(),this.emit(ze.FINISHED,this))},n.simpleProcess=function(){var t=this._playbackRange.min,e=this._playbackDuration,n=this.time%e;n<0&&(n+=e);var r=(t+n)*this._invDuration;this._sampleCurves(r),this._clip.hasEvents()&&this._sampleEvents(this.getWrappedInfo(this.time,this._wrappedInfo)),this._allowLastFrame&&(void 0===this._lastIterations&&(this._lastIterations=r),(this.time>0&&this._lastIterations>r||this.time<0&&this._lastIterations<r)&&this.emit(ze.LASTFRAME,this),this._lastIterations=r)},n.cache=function(){},n._needReverse=function(t){var e=this.wrapMode,n=!1;return(e&C.PingPong)===C.PingPong&&(t-(0|t)==0&&t>0&&(t-=1),1&t&&(n=!n)),(e&C.Reverse)===C.Reverse&&(n=!n),n},n.getWrappedInfo=function(t,e){e=e||new R;var n=this._getPlaybackStart(),r=this._getPlaybackEnd()-n,i=!1,a=this.repeatCount,s=t>0?t/r:-t/r;if(s>=a){s=a,i=!0;var o=a-(0|a);0===o&&(o=1),t=o*r*(t>0?1:-1)}if(t>r){var u=t%r;t=0===u?r:u}else t<0&&0!=(t%=r)&&(t+=r);var l=!1,c=this._wrapMode&C.ShouldWrap;c&&(l=this._needReverse(s));var h=l?-1:1;return this.speed<0&&(h*=-1),c&&l&&(t=r-t),e.time=n+t,e.ratio=e.time/this.duration,e.direction=h,e.stopped=i,e.iterations=s,e},n._getPlaybackStart=function(){return this._playbackRange.min},n._getPlaybackEnd=function(){return this._playbackRange.max},n._sampleEvents=function(t){var e=this._clip.eventGroups.length,n=t.direction,r=this._clip.getEventGroupIndexAtRatio(t.ratio);if(r<0&&(r=~r-1,n<0&&(r+=1)),this._ignoreIndex!==r&&(this._ignoreIndex=-1),t.frameIndex=r,!this._lastWrapInfoEvent)return this._fireEvent(r),void(this._lastWrapInfoEvent=new R(t));var i=this.wrapMode,a=je(t.iterations),s=this._lastWrapInfoEvent,o=je(s.iterations),u=s.frameIndex,l=s.direction,c=-1!==o&&a!==o;if(u===r&&c&&1===e)this._fireEvent(0);else if(u!==r||c){n=l;do{if(u!==r){if(-1===n&&0===u&&r>0?((i&C.PingPong)===C.PingPong?n*=-1:u=e,o++):1===n&&u===e-1&&r<e-1&&((i&C.PingPong)===C.PingPong?n*=-1:u=-1,o++),u===r)break;if(o>a)break}u+=n,h.director.getAnimationManager().pushDelayEvent(this._fireEvent,this,[u])}while(u!==r&&u>-1&&u<e)}this._lastWrapInfoEvent.set(t)},n._emit=function(t,e){this._target&&this._target.isValid&&this._target.emit(t,t,e)},n._fireEvent=function(t){if(this._targetNode&&this._targetNode.isValid){var e=this._clip.eventGroups;if(!(t<0||t>=e.length||this._ignoreIndex===t))for(var n,r=e[t],i=this._targetNode.components,a=g(r.events);!(n=a()).done;)for(var s,o=n.value,u=o.functionName,l=g(i);!(s=l()).done;){var c=s.value,h=c[u];"function"==typeof h&&h.apply(c,o.parameters)}}},n._onReplayOrResume=function(){h.director.getAnimationManager().addAnimation(this)},n._onPauseOrStop=function(){h.director.getAnimationManager().removeAnimation(this)},n._destroyBlendStateWriters=function(){for(var t=0;t<this._blendStateWriters.length;++t)this._blendStateWriters[t].destroy();this._blendStateWriters.length=0,this._blendStateBuffer&&(this._blendStateBuffer.unbindState(this),this._blendStateBuffer=null),this._blendStateWriterHost.enabled=!1},y(e,[{key:"clip",get:function(){return this._clip}},{key:"name",get:function(){return this._name}},{key:"length",get:function(){return this.duration}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(t){this._wrapMode=t,this.time=0,t&C.Loop?this.repeatCount=1/0:this.repeatCount=1}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(t){this._repeatCount=t;var e=this._wrapMode&C.ShouldWrap,n=(this.wrapMode&C.Reverse)===C.Reverse;this._process=t!==1/0||e||n?this.process:this.simpleProcess}},{key:"delay",get:function(){return this._delay},set:function(t){this._delayTime=this._delay=t}},{key:"playbackRange",get:function(){return this._playbackRange},set:function(t){O(t.max>t.min),this._playbackRange.min=Math.max(t.min,0),this._playbackRange.max=Math.min(t.max,this.duration),this._playbackDuration=this._playbackRange.max-this._playbackRange.min,this.setTime(0)}},{key:"current",get:function(){return this.getWrappedInfo(this.time).time}},{key:"ratio",get:function(){return this.current/this.duration}},{key:"curveLoaded",get:function(){return this._curveLoaded}}]),e}(xe));function je(t){return t-(0|t)==0&&(t-=1),0|t}h.AnimationState=Ne;var Ge,He,Ye,Qe,Xe,Je,Ke,Ze,$e,tn,en,nn,rn,an,sn,on,un,ln=function(t){function e(){var e;return(e=t.call(this)||this)._managedStates=[],e._fadings=[],e}m(e,t);var n=e.prototype;return n.update=function(t){if(!this.isMotionless){var e=this._managedStates,n=this._fadings;if(1===e.length&&1===n.length){var r=e[0].state;r&&(r.weight=1)}else this._calculateWeights(t);for(var i=0;i<e.length;++i){var a=e[i].state;a&&a.isMotionless&&a.sample()}}},n.crossFade=function(t,e){var n;0===this._managedStates.length&&(e=0),0===e&&this.clear();var r=this._managedStates.find((function(e){return e.state===t}));r?(null===(n=r.state)||void 0===n?void 0:n.isMotionless)&&r.state.play():(r={state:t,reference:0},t&&t.play(),this._managedStates.push(r)),++r.reference,this._fadings.unshift({easeDuration:e,easeTime:0,target:r})},n.clear=function(){for(var t=0;t<this._managedStates.length;++t){var e=this._managedStates[t].state;e&&e.stop()}this._managedStates.length=0,this._fadings.length=0},n.onPlay=function(){t.prototype.onPlay.call(this),h.director.getAnimationManager().addCrossFade(this)},n.onPause=function(){t.prototype.onPause.call(this),h.director.getAnimationManager().removeCrossFade(this);for(var e=0;e<this._managedStates.length;++e){var n=this._managedStates[e].state;n&&n.pause()}},n.onResume=function(){t.prototype.onResume.call(this),h.director.getAnimationManager().addCrossFade(this);for(var e=0;e<this._managedStates.length;++e){var n=this._managedStates[e].state;n&&n.resume()}},n.onStop=function(){t.prototype.onStop.call(this),h.director.getAnimationManager().removeCrossFade(this),this.clear()},n._calculateWeights=function(t){for(var e=this._managedStates,n=(this._fadings,0);n<e.length;++n){var r=e[n].state;r&&(r.weight=0)}for(var i=1,a=this._fadings.length,s=0;s<this._fadings.length;++s){var o=this._fadings[s];o.easeTime+=t;var u=0===o.easeDuration?1:v(o.easeTime/o.easeDuration),l=u*i;if(i*=1-u,o.target.state&&(o.target.state.weight+=l),o.easeTime>=o.easeDuration){a=s+1,o.easeTime=o.easeDuration;break}}if(a!==this._fadings.length){for(var c=a;c<this._fadings.length;++c){var h=this._fadings[c];--h.target.reference,h.target.reference<=0&&(h.target.state&&h.target.state.stop(),L(this._managedStates,h.target))}this._fadings.splice(a)}},e}(xe);function cn(t,e){return t===e||!!t&&!!e&&t._uuid===e._uuid&&t._uuid}t("d",(Ge=e("cc.Animation"),He=V(),Ye=G(99),Qe=q(),Xe=B([Re]),Je=N(),Ke=B(Re),Ze=N(),$e=N(),tn=B([Re]),Ge(en=He(en=Ye(en=x(en=Qe((un=on=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,o(e,"playOnLoad",rn,S(e)),e._crossFade=new ln,e._nameToState=W(!0),o(e,"_clips",an,S(e)),o(e,"_defaultClip",sn,S(e)),e._hasBeenPlayed=!1,e}m(e,t);var n=e.prototype;return n.onLoad=function(){for(var t in this.clips=this._clips,this._nameToState)this._nameToState[t].initialize(this.node)},n.start=function(){this.playOnLoad&&!this._hasBeenPlayed&&this._defaultClip&&this.crossFade(this._defaultClip.name,0)},n.onEnable=function(){this._crossFade.resume()},n.onDisable=function(){this._crossFade.pause()},n.onDestroy=function(){for(var t in this._crossFade.stop(),this._nameToState)this._nameToState[t].destroy();this._nameToState=W(!0)},n.play=function(t){if(this._hasBeenPlayed=!0,!t){if(!this._defaultClip)return;t=this._defaultClip.name}this.crossFade(t,0)},n.crossFade=function(t,e){void 0===e&&(e=.3),this._hasBeenPlayed=!0;var n=this._nameToState[t];n&&(this._crossFade.play(),this._crossFade.crossFade(n,e))},n.pause=function(){this._crossFade.pause()},n.resume=function(){this._crossFade.resume()},n.stop=function(){this._crossFade.stop()},n.getAnimationState=function(t){return this.getState(t)},n.getState=function(t){var e=this._nameToState[t];return e&&!e.curveLoaded&&e.initialize(this.node),e||null},n.createState=function(t,e){return e=e||t.name,this.removeState(e),this._doCreateState(t,e)},n.removeState=function(t){var e=this._nameToState[t];e&&(e.allowLastFrameEvent(!1),e.stop(),delete this._nameToState[t])},n.addClip=function(t,e){return z(this._clips,t)||this._clips.push(t),this.createState(t,e)},n.removeClip=function(t,e){var n;for(var r in this._nameToState){var i=this._nameToState[r];if(i.clip===t){n=i;break}}if(t===this._defaultClip){if(!e)return void D(3902);this._defaultClip=null}if(n&&n.isPlaying){if(!e)return void D(3903);n.stop()}this._clips=this._clips.filter((function(e){return e!==t})),n&&delete this._nameToState[n.name]},n.on=function(e,n,r,i){var a=t.prototype.on.call(this,e,n,r,i);return e===ze.LASTFRAME&&this._syncAllowLastFrameEvent(),a},n.once=function(e,n,r){var i=t.prototype.once.call(this,e,n,r);return e===ze.LASTFRAME&&this._syncAllowLastFrameEvent(),i},n.off=function(e,n,r){t.prototype.off.call(this,e,n,r),e===ze.LASTFRAME&&this._syncDisallowLastFrameEvent()},n._createState=function(t,e){return new Ne(t,e)},n._doCreateState=function(t,e){var n=this._createState(t,e);return n._setEventTarget(this),n.allowLastFrameEvent(this.hasEventListener(ze.LASTFRAME)),this.node&&n.initialize(this.node),this._nameToState[n.name]=n,n},n._getStateByNameOrDefaultClip=function(t){if(!t){if(!this._defaultClip)return null;t=this._defaultClip.name}return this._nameToState[t]||null},n._removeStateOfAutomaticClip=function(t){for(var e in this._nameToState){var n=this._nameToState[e];cn(t,n.clip)&&(n.stop(),delete this._nameToState[e])}},n._syncAllowLastFrameEvent=function(){if(this.hasEventListener(ze.LASTFRAME))for(var t in this._nameToState)this._nameToState[t].allowLastFrameEvent(!0)},n._syncDisallowLastFrameEvent=function(){if(!this.hasEventListener(ze.LASTFRAME))for(var t in this._nameToState)this._nameToState[t].allowLastFrameEvent(!1)},y(e,[{key:"clips",get:function(){return this._clips},set:function(t){var e=this;this._crossFade&&this._crossFade.clear();for(var n,r=g(this._clips);!(n=r()).done;){var i=n.value;i&&this._removeStateOfAutomaticClip(i)}for(var a,s=g(t);!(a=s()).done;){var o=a.value;o&&this.createState(o)}var u=t.find((function(t){return cn(t,e._defaultClip)}));this._defaultClip=u||null,this._clips=t}},{key:"defaultClip",get:function(){return this._defaultClip},set:function(t){this._defaultClip=t,t&&(this._clips.findIndex((function(e){return cn(e,t)}))>=0||(this._clips.push(t),this.createState(t)))}}]),e}(U(j)),on.EventType=ze,n((nn=un).prototype,"clips",[Xe,Je],Object.getOwnPropertyDescriptor(nn.prototype,"clips"),nn.prototype),n(nn.prototype,"defaultClip",[Ke,Ze],Object.getOwnPropertyDescriptor(nn.prototype,"defaultClip"),nn.prototype),rn=n(nn.prototype,"playOnLoad",[u,$e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),an=n(nn.prototype,"_clips",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),sn=n(nn.prototype,"_defaultClip",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=nn))||en)||en)||en)||en)||en));var hn=[],fn=new Map,pn=new s}}}));
